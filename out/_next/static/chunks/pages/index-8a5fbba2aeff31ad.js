(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(2563)}])},2563:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var n=s(5893),i=s(4915),c=s.n(i);s(1082),s(6797);var a=s(7294),o=s(9583),d=s(719),r=s(1911),l=s(1163),_=s(6363),u=s(196),h=s(3119),x=s.n(h);function m(e){console.log(e.qntddItem);let[t,s]=(0,a.useState)(0),[i,c]=(0,a.useState)(0),[d,r]=(0,a.useState)(0),[l,_]=(0,a.useState)(0);return((0,a.useEffect)(()=>{c(e.qntddItem.reduce((e,t)=>e+t.total,0))},[e.qntddItem]),console.log(d),(0,a.useEffect)(()=>{_(window.screen.width)},[]),0==e.qntddItem.length)?(0,n.jsx)("div",{className:x().container2,children:(0,n.jsx)("div",{className:x().cardItem2,children:"Nenhum produto adicionado."})}):(0,n.jsx)("div",{className:x().container2,children:(0,n.jsxs)("div",{className:x().content,children:[(0,n.jsx)("div",{className:x().cardItem,children:(0,n.jsxs)("table",{className:x().descricaoBox,children:[(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Produto"}),(0,n.jsx)("th",{children:"Nome"}),(0,n.jsx)("th",{children:"Pre\xe7o"}),(0,n.jsx)("th",{children:"Quantidade"}),(0,n.jsx)("th",{children:"Total"})]}),e.qntddItem.map(t=>{var s,i,c,a;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)("div",{className:x().imgContainer,children:(0,n.jsx)("img",{src:t.image,alt:t.prod})})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:x().nomeProd,children:t.prod})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:x().precoProd,children:t.preco.toLocaleString("pt-br",{style:"currency",currency:"BRL"})})}),(0,n.jsx)("td",{children:(0,n.jsxs)("div",{className:x().qntddProd,children:[(0,n.jsx)("button",{onClick:()=>e.subProduto(t.id),children:1==t.qnt?(0,n.jsx)(o.Xm5,{}):(0,n.jsx)(o.iFH,{})}),(0,n.jsx)("input",{id:t.id,type:"number",placeholder:"",value:(null===(i=null===(s=e.qntddItem)||void 0===s?void 0:s.find(e=>e.id==t.id))||void 0===i?void 0:i.qnt)?null===(a=null===(c=e.qntddItem)||void 0===c?void 0:c.find(e=>e.id==t.id))||void 0===a?void 0:a.qnt:0}),(0,n.jsx)("button",{onClick:()=>e.somaProduto(t.id,t.nome,t.descricao,t.preco),children:(0,n.jsx)(o.wEH,{})})]})}),(0,n.jsx)("td",{children:(0,n.jsx)("span",{className:x().totalProd,children:t.total.toLocaleString("pt-br",{style:"currency",currency:"BRL"})})})]},t.id)})]})}),(0,n.jsxs)("div",{className:1==d?x().rightOpen:x().rightClose,children:[l<800&&(0,n.jsx)("div",{className:x().btnTotal,children:(0,n.jsx)("button",{onClick:function(){1==d?r(0):r(1)},children:(0,n.jsx)(o.s$2,{})})}),(0,n.jsxs)("div",{className:x().wrapper,children:[(0,n.jsx)("h2",{className:x().title,children:"PEDIDO"}),(0,n.jsx)("div",{className:x().cartText,children:(0,n.jsxs)("p",{children:["Total: ",i.toLocaleString("pt-br",{style:"currency",currency:"BRL"})]})}),(0,n.jsx)("div",{className:x().finalizar,children:(0,n.jsx)("button",{children:"Finalizar Pedido"})})]})]})]})})}s(1664);var p=s(7421),j=s.n(p);function v(e){return(0,n.jsx)("div",{className:j().container,children:(0,n.jsxs)("div",{className:j().topo,children:[e.nomeFantasia," - ",e.nomeCidade]})})}var y=s(4741);function f(){let e="0f65c16dd27511eb85653286348d30d5",[t,s]=(0,a.useState)([]),[i,h]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[j,f]=(0,a.useState)(0),[g,N]=(0,a.useState)(0),b="https://mypubapi.azurewebsites.net",[q,P]=(0,a.useState)(!0),{query:w}=(0,l.useRouter)(),[I,k]=(0,a.useState)(0),[S,E]=(0,a.useState)([]);function C(){u.ZP.get("".concat(b,"/v1/appweb/produtos/apklistar?dbmaster_id_empresa=").concat(I,"&id_categoria="),{headers:{token:"".concat(e)}}).then(e=>{s(e.data.produtos)}).catch(e=>{console.error(e)})}function B(e,t,s,n){let i=[...x],c=i.find(t=>t.id==e);c?(c.qnt=c.qnt+1,c.total=c.qnt*c.preco):i.push({id:e,qnt:1,prod:t,image:n,preco:s,total:s}),p(i)}function L(e){let t=[...x],s=t.find(t=>t.id==e);if(s&&s.qnt>1)s.qnt=s.qnt-1,s.total=s.qnt*s.preco,p(t);else{let n=t.filter(t=>t.id!==e);p(n)}}return((0,a.useEffect)(()=>{I=parseInt(w.id),u.ZP.get("".concat(b,"/v1/appweb/Empresa/apklistarbyid?dbmaster_id_empresa=").concat(I),{headers:{token:"".concat(e)}}).then(e=>{E(e.data.restaurante)}).catch(e=>{console.error(e)})},[w]),(0,a.useEffect)(()=>{u.ZP.get("".concat(b,"/v1/appweb/categoria/apklistar?dbmaster_id_empresa=").concat(I),{headers:{token:"".concat(e)}}).then(e=>{h(e.data.categorias),C()}).catch(e=>{console.error(e)})},[]),(0,a.useEffect)(()=>{u.ZP.get("".concat(b,"/v1/appweb/categoria/apklistar?dbmaster_id_empresa=").concat(I),{headers:{token:"".concat(e)}}).then(e=>{h(e.data.categorias),C()}).catch(e=>{console.error(e)})},[w]),(0,a.useEffect)(()=>{N(window.screen.width)},[]),0==j)?(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsx)(v,{nomeFantasia:S.fantasia,nomeCidade:S.cidade}),(0,n.jsxs)("div",{className:c().content,children:[(0,n.jsx)("div",{className:c().scrollBox,children:(0,n.jsx)("div",{className:c().categoriasScroll,children:(0,n.jsx)(d.tq,{className:c().swiper,modules:[r.tl],spaceBetween:g>1023?5:20,slidesPerView:g>1023?5:3,pagination:!0,children:i.map(e=>(0,n.jsx)(d.o5,{children:(0,n.jsx)("a",{className:c().item,href:"#".concat(e.id.toString()),children:e.descricao})},e.id))})})}),(0,n.jsx)("div",{className:c().acordionBox,children:i.map((e,s)=>(0,n.jsx)(_.fC,{collapsible:!0,defaultValue:e.id,children:(0,n.jsxs)(_.ck,{value:e.id,children:[(0,n.jsx)(_.h4,{children:(0,n.jsx)(_.xz,{id:e.id,className:c().botao,children:e.descricao})}),(0,n.jsx)(_.VY,{className:c().itens,children:t.map(t=>{if(e.id==t.idCategoria){var s,i;return(0,n.jsxs)("div",{className:c().cardItem,children:[(0,n.jsx)("div",{className:c().descricaoBox,children:(0,n.jsx)("div",{className:c().descricao,children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:t.descricao}),(0,n.jsxs)("div",{className:c().precoEqntdd,children:[(0,n.jsx)("p",{children:t.detalhes[0].precoVenda.toLocaleString("pt-br",{style:"currency",currency:"BRL"})}),!q&&(0,n.jsxs)("div",{className:c().qntddProduto,children:[(0,n.jsx)("button",{onClick:()=>L(t.codigo),children:(0,n.jsx)(o.iFH,{})}),(0,n.jsx)("input",{id:t.codigo,type:"number",placeholder:"",value:(null===(s=null==x?void 0:x.find(e=>e.id==t.codigo))||void 0===s?void 0:s.qnt)?null===(i=null==x?void 0:x.find(e=>e.id==t.codigo))||void 0===i?void 0:i.qnt:0}),(0,n.jsx)("button",{onClick:()=>B(t.codigo,t.descricao,t.detalhes[0].precoVenda,t.detalhes[0].foto),children:(0,n.jsx)(o.wEH,{})})]})]})]})})}),(0,n.jsx)("img",{src:t.detalhes[0].foto,className:c().imgItem})]},t.codigo)}})})]})},e.id))})]}),!q&&(0,n.jsx)("div",{className:c().container,children:(0,n.jsx)("button",{className:c().btn,onClick:()=>f(1),children:(0,n.jsx)("div",{children:(0,n.jsx)(o.FeP,{})})})}),(0,n.jsx)(y.Z,{})]}):(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsx)("div",{className:c().container,children:(0,n.jsxs)("button",{className:c().titulo,onClick:()=>f(0),children:[(0,n.jsx)(o.bUI,{}),(0,n.jsx)("div",{children:(0,n.jsx)("h1",{children:"Meu Carrinho"})})]})}),(0,n.jsx)(m,{somaProduto:B,subProduto:L,qntddItem:x,nomeFantasia:S.restaurante.fantasia})]})}var g=s(9008),N=s.n(g);function b(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(N(),{children:[(0,n.jsx)("title",{children:"MyPub- Card\xe1pio"}),(0,n.jsx)("link",{rel:"shortcut icon",href:"./images/mypub_logo.svg",type:"image"})]}),(0,n.jsx)(f,{})]})}},3119:function(e){e.exports={conteudo:"styles_conteudo__osLR4",container2:"styles_container2__lMGTx",content:"styles_content__LKHXn",cardItem:"styles_cardItem__9V26N",cardItem2:"styles_cardItem2__oO1Xk",descricaoBox:"styles_descricaoBox__R_Gti",nomeProd:"styles_nomeProd__vsmAb",totalProd:"styles_totalProd__9zM55",qntddProd:"styles_qntddProd__eL6bQ",imgContainer:"styles_imgContainer__74SwV",rightOpen:"styles_rightOpen__E_xud",rightClose:"styles_rightClose__88l7X",wrapper:"styles_wrapper__OlFZK",cartText:"styles_cartText__BirSd",finalizar:"styles_finalizar__DHa_5",btnTotal:"styles_btnTotal__izMrK",acordionBox:"styles_acordionBox__Qu_Xl"}},4915:function(e){e.exports={container:"styles_container__LwpRW",content:"styles_content__3_Fpl",scrollBox:"styles_scrollBox___5bwu",categoriasScroll:"styles_categoriasScroll__NbQEo",swiper:"styles_swiper__lyfNb",item:"styles_item__QuTP6",acordionBox:"styles_acordionBox__31dTo",botao:"styles_botao__2Jadc",cardItem:"styles_cardItem__IYdaE",imgItem:"styles_imgItem__gu9tG",descricaoBox:"styles_descricaoBox___f2po",descricao:"styles_descricao__XUKy_",qntddProduto:"styles_qntddProduto__mDNgM",precoEqntdd:"styles_precoEqntdd__t_o67",itens:"styles_itens__qJLSs",titulo:"styles_titulo__hWq6O",btn:"styles_btn__fLuWG"}},7421:function(e){e.exports={container:"styles_container__o30M_",topo:"styles_topo__6x8ev",filtroVermelho:"styles_filtroVermelho__lEk6Q",logo:"styles_logo__jpgpp"}}},function(e){e.O(0,[445,776,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);